<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Web Applications [UAM]- by Damian Sosnowski</title>

		<meta name="author" content="Damian Sosnowski">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/night.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Nowoczesne Aplikacje Internetowe</h1>
					<h3>JavaScript - Objects</h3>
                    <p><b>Andrzej Matłosz</b><br />andrzej.matlosz@gmail.com</p>
					<p>Materiały: <a href="https://github.com/andrzejmatlosz/UAM-2017-18">https://github.com/andrzejmatlosz/UAM-2017-18</a></p>
				</section>

				<section>
					<h2>Object Oriented JavaScript</h2>
					<ul>
						<li>JavaScript is object oriented</li>
						<li>However its OOP is misunderstood</li>
						<li>Truth to be told it's also confusing</li>
					</ul>
				</section>

				<section>
					<h4>Objects are very simple</h4>
					<pre class="fragment"><code>
var obj = {};
obj.name = 'Jack';</code></pre><pre class="fragment"><code>
obj.sayHello = function () {
    return 'Hi, ' + this.name;
};

obj.sayHello(); // Hi, Jack</code></pre><pre class="fragment"><code>

var obj = {
    name: 'Jack',
    sayHello: function () {
        return 'Hi, ' + this.name;
    }
};</code></pre>
				</section>

				<section>
					<h4>ES6 features</h4>
					<pre class="fragment"><code>
let obj = {
	x() {
		console.log('inside x method');
	},
	y() {
		console.log('inside y method');
	}
};
obj.x(); //inside x method
</code></pre><pre class="fragment"><code>
let x = 2, y = 3;
let obj2 = {x, y}; // short version of obj2 = { x: x , y: y };
console.log(obj2.x); // 2
console.log(obj2.y); // 3
</code></pre>
				</section>

								<section>
					<h4>ES6 features</h4>
					<pre class="fragment"><code>
let prefix = 'user_';
let obj = {
	foo() { return 20; },
	[prefix + 'foo']: function() { return 10; },
	[prefix + 'boo']: 5
};
console.log(obj.foo()); // 20
console.log(obj.user_foo()); // 10
console.log(obj.user_boo); // 5
</code></pre>
				</section>

				<section>
					<h4>But inheritance (ES5) is confusing!</h4>
					<h2 class="fragment">Prototypes</h2>
				</section>

				<section>
					<h2>How can we create object with a prototype?</h2>
					<pre class="prettyprint fragment"><code>
var Person = {
    sayHello: function () {
        return 'Hi ' + this.name + '!';
    }
};
</code></pre><pre class="fragment"><code>
var obj = Object.create(Person);
obj.name = 'Damian';

var obj2 = Object.create(Person);
obj.name = 'Zdzichu';
</code></pre><pre class="fragment"><code>
obj.sayHello(); // Hi Damian!
obj2.sayHello(); // Hi Zdzichu!
</code></pre><pre class="fragment"><code>
obj.sayHello === obj2.sayHello; // true
</code></pre>
				</section>


				<section>
					<h4>Inheritance - no classes (ES5)</h4>
					<pre class="fragment"><code>
var Dog = {
    run: function () {
        return 'I run!';
    },
    bark: function () {
        return 'Hau! Hau!';
    }
};

var dog = Object.create(Dog);
console.log(dog.bark()); // Hau! Hau!</code></pre>
<pre class="fragment"><code>
var SmallDog = Object.create(Dog);
SmallDog.bark = function () {
    return 'pi pi pi';
}
</code></pre>
<pre class="fragment"><code>
var smallDog = Object.create(SmallDog);
console.log(smallDog.run()); // I run!
console.log(smallDog.bark()); // Pi pi pi</code></pre>

				</section>

				<section>
					<h4>Inheritance - no classes (ES6 setPrototypeOf)</h4>
					<pre class="fragment"><code>
var Dog = {
    run() {
        return 'I run!';
    },
    bark() {
        return 'Hau! Hau!';
    }
};

var dog = {};
Object.setPrototypeOf(dog, Dog);
console.log(dog.bark()); // Hau! Hau!
</code></pre>
<pre class="fragment"><code>
var SmallDog = {
    bark() {
        return 'pi pi pi';
    }
}
Object.setPrototypeOf(SmallDog, Dog);
</code></pre>
<pre class="fragment"><code>
var smallDog = {};
Object.setPrototypeOf(smallDog, SmallDog);
console.log(smallDog.run()); // I run!
console.log(smallDog.bark()); // Pi pi pi</code></pre>

				</section>

				<section>
					<h4>Inheritance ES6 super keyword</h4>
					<pre class="fragment"><code>
let o1 = {
    foo () {
        console.log('o1:foo');
    }
};

let o2 = {
    foo () {
        super.foo();
        console.log('o2:foo');
    }
};

Object.setPrototypeOf(o2, o1);
o2.foo(); // o1:foo o2:foo
</code></pre>

				</section>

				<section>
					<h3>Inheritance === prototype chain</h3>

					<p style="text-align: center"><img src="img/chain.png"/></p>
				</section>

				<section>
					<h3>Prototype</h3>
					<pre><code>
obj.prototype; // NO!
obj.__proto__;
Object.getPrototypeOf(obj);

obj.hasOwnProperty(prop) </code></pre>
				</section>

				<section>
					<h2>Exercise</h2>
					<p class="strong">Lesson3/code/animals</p>
				</section>

				<section>
					<h2>Classes ES5</h2>
					<pre class="fragment"><code>
var arr = new Array();
var obj = new Object();

var myInst = new MyClass();</code></pre>
				</section>

				<section>
					<h4>Class (ES5) is ... a function</h4>
					<pre><code>
function MyClass() {

}

var inst = new MyClass();</code></pre>
				</section>

				<section>
					<pre><code>
var Person = function (name) {
	this.myName = name;
	this.age = 18;

	this.doSmth = function () {}
}</code></pre>
<pre><code>
var inst1 = new Person('Gucio'), inst2 = new Person('Zdzisio');

inst1.myName; // Gucio
inst1.doSmth();

inst1.doSmth !== inst2.doSmth; // true</code></pre>
				</section>

				<section>
					<h4>Prototype in classes</h4>
					<pre><code>
var Person = function (name) {
	this.myName = name;
}

Person.prototype.sayHello = function () {
	return 'Hi I am ' + this.myName + '.';
};</code></pre>
					<pre><code>
var dev1 = new Person('Damian');
var dev2 = new Person('Pawel');

dev1.sayHello === dev2.sayHello;

dev1.sayHello(); // Hi I am Damian.
dev2.sayHello(); // Hi I am Pawel.</code></pre>
				</section>

				<section>
					<h3>Where is the magic</h3>
					<h2 class="fragment">"new" operator!!</h2>
					<ul class="fragment">
						<li>Create object</li>
						<li>Take <b>prototype</b> property of the <b>contructor function</b> and make it a part of <b>prototype chain</b> of the object</li>
						<li>Execute the constructor function in the context of the created object</li>
						<li>If constructor returns some object, return it. If not, return the initially created object</li>
					</ul>
				</section>

				<section>
					<h4>ES6 classes</h4>
					<pre><code>
class Cat { 
  constructor(name) {
    this.name = name;
  }
  
  speak() {
    console.log(this.name + ' makes a noise.');
  }
}

class Lion extends Cat {
  speak() {
    super.speak();
    console.log(this.name + ' roars.');
  }
}

let cat = new Cat('Filemon'); // Filemon makes a noise.
cat.speak();
let lion = new Lion('Simba');
lion.speak(); // Simba makes a noise.
// Simba roars.
console.log(typeof lion === typeof cat); // true</code></pre>
				</section>

				<section>
					<h2>Exercise</h2>
					<p class="strong">Lesson3/code/newObject</p>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				width: 1600,
				height: 1000,

				theme: 'night', // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
